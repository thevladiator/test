<!doctype html>
<html lang="en" class="page-type-section">
<head prefix="og: http://ogp.me/ns#">
<meta charset="utf-8">
<title>Built-ins for numbers - FreeMarker Manual</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="format-detection" content="telephone=no">
<meta property="og:site_name" content="FreeMarker Manual">
<meta property="og:title" content="Built-ins for numbers">
<meta property="og:locale" content="en_US">
<meta property="og:url" content="http://freemarker.org/docs/ref_builtins_number.html">
<link rel="canoical" href="http://freemarker.org/docs/ref_builtins_number.html">
<link rel="icon" href="favicon.png" type="image/png">
<link rel="stylesheet" type="text/css" href="docgen-resources/docgen.min.css">
</head>
<body itemscope itemtype="http://schema.org/Article">
  <!--[if lte IE 9]>
  <div style="background-color: #C00; color: #fff; padding: 12px 24px;">Please use a modern browser to view this website.</div>
  <![endif]--><div class="header-top-bg"><div class="site-width header-top"><a class="logo" href="http://freemarker.org" role="banner">            <img src="logo.png" alt="FreeMarker">
</a><ul class="tabs"><li><a href="http://freemarker.org/">Home</a></li><li class="current"><a href="index.html">Manual</a></li><li><a class="external" href="api/index.html">Java API</a></li></ul><ul class="secondary-tabs"><li><a class="tab icon-heart" href="http://freemarker.org/contribute.html" title="Contribute"><span>Contribute</span></a></li><li><a class="tab icon-bug" href="https://sourceforge.net/p/freemarker/bugs/new/" title="Report a Bug"><span>Report a Bug</span></a></li><li><a class="tab icon-download" href="http://freemarker.org/freemarkerdownload.html" title="Download"><span>Download</span></a></li></ul></div></div><div class="header-bottom-bg"><div class="site-width search-row"><a href="toc.html" class="navigationHeader">Manual</a><div class="navigationHeader"></div></div><div class="site-width breadcrumb-row"><ul class="breadcrumb"><li class="step-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a class="label" itemprop="url" href="toc.html"><span itemprop="title">FreeMarker Manual</span></a></li><li class="step-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a class="label" itemprop="url" href="ref.html"><span itemprop="title">Template Language Reference</span></a></li><li class="step-2" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a class="label" itemprop="url" href="ref_builtins.html"><span itemprop="title">Built-in Reference</span></a></li><li class="step-3" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a class="label" itemprop="url" href="ref_builtins_number.html"><span itemprop="title">Built-ins for numbers</span></a></li></ul><div class="bookmarks" title="Bookmarks"><span class="sr-only">Bookmarks:</span><ul class="bookmark-list"><li><a href="alphaidx.html">Alpha. index</a></li><li><a href="gloss.html">Glossary</a></li><li><a href="dgui_template_exp.html#exp_cheatsheet">Expressions</a></li><li><a href="ref_builtins_alphaidx.html">?builtins</a></li><li><a href="ref_directive_alphaidx.html">#directives</a></li><li><a href="ref_specvar.html">.spec_vars</a></li><li><a href="app_faq.html">FAQ</a></li></ul></div></div></div>    <div class="main-content site-width">
      <div class="content-wrapper">
  <div id="table-of-contents-wrapper" class="col-left">
      <script>var breadcrumb = ["FreeMarker Manual","Template Language Reference","Built-in Reference","Built-ins for numbers"];</script>
      <script src="toc.js"></script>
      <script src="docgen-resources/main.min.js"></script>
  </div>
<div class="col-right"><div class="page-content"><div class="page-title"><div class="pagers top"><a class="paging-arrow previous" href="ref_builtins_string.html"><span>Previous</span></a><a class="paging-arrow next" href="ref_builtins_date.html"><span>Next</span></a></div><div class="title-wrapper">
<h1 class="content-header header-section1" id="ref_builtins_number" itemprop="name">Built-ins for numbers</h1>
</div></div><div class="page-menu">
<div class="page-menu-title">Page Contents</div>
<ul><li><a class="page-menu-link" href="#ref_builtin_abs" data-menu-target="ref_builtin_abs">abs</a></li><li><a class="page-menu-link" href="#ref_builtin_c" data-menu-target="ref_builtin_c">c (when used with numerical value)</a></li><li><a class="page-menu-link" href="#ref_builtin_is_infinite" data-menu-target="ref_builtin_is_infinite">is_infinite</a></li><li><a class="page-menu-link" href="#ref_builtin_is_nan" data-menu-target="ref_builtin_is_nan">is_nan</a></li><li><a class="page-menu-link" href="#ref_builtin_lower_abc" data-menu-target="ref_builtin_lower_abc">lower_abc</a></li><li><a class="page-menu-link" href="#ref_builtin_rounding" data-menu-target="ref_builtin_rounding">round, floor, ceiling</a></li><li><a class="page-menu-link" href="#ref_builtin_string_for_number" data-menu-target="ref_builtin_string_for_number">string (when used with a numerical value)</a></li><li><a class="page-menu-link" href="#ref_builtin_upper_abc" data-menu-target="ref_builtin_upper_abc">upper_abc</a></li></ul> </div><p>Related FAQs: Do you have things like 1,000,000 or 1 000 000
        instead of 1000000, or something like 3.14 instead of 3,14 or vice
        versa? See <a href="app_faq.html#faq_number_grouping">this</a> and <a href="app_faq.html#faq_number_decimal_point">this</a> FAQ entry, also note
        the <code class="inline-code">c</code> built-in above.</p>
          



<h2 class="content-header header-section2" id="ref_builtin_abs">abs</h2>


          

          

            <div class="callout note">
    <strong class="callout-label">Note:</strong>

            <p>This built-in exists since FreeMarker 2.3.20.</p>
            </div>


          <p>Gives the absolute value of a number. For example
          <code class="inline-code">x?abs</code> , if <code class="inline-code">x</code> is -5, will
          evaluate to 5.</p>
        
          



<h2 class="content-header header-section2" id="ref_builtin_c">c (when used with numerical value)</h2>


          

          

          

          

            <div class="callout note">
    <strong class="callout-label">Note:</strong>

            <p>This built-in exists since FreeMarker 2.3.3.</p>
            </div>


          <p>This built-in converts a number to string for a
          "computer language" as opposed to for human audience.
          That is, it formats with the rules that programming languages used
          to use, which is independent of all the locale and number format
          settings of FreeMarker. It always uses dot as decimal separator, and
          it never uses grouping separators (like 3,000,000), nor exponential
          form (like 5E20), nor superfluous leading or trailing 0-s (like 03
          or 1.0), nor + sign (like +1). It will print at most 16 digits after
          the decimal dot, and thus numbers whose absolute value is less than
          1E-16 will be shown as 0. This built-in is crucial because be
          default (like with <code class="inline-code">${x}</code>) numbers are converted to
          strings with the locale (language, country) specific number
          formatting, which is for human readers (like 3000000 is possibly
          printed as 3,000,000). When the number is printed not for human
          audience (e.g., for a database record ID used as the part of an URL,
          or as invisible field value in a HTML form, or for printing
          CSS/JavaScript numerical literals) this built-in must be used to
          print the number (i.e., use <code class="inline-code">${x?c}</code> instead of
          <code class="inline-code">${x}</code>), or else the output will be possibly broken
          depending on the current number formatting settings and locale (like
          the decimal point is not dot, but comma in many countries) and the
          value of the number (like big numbers are possibly ``damaged&#39;&#39; by
          grouping separators).</p>

          <p>If the <code class="inline-code">incompatible_imporvements</code> FreeMarker
          configuration setting is set to 2.3.21 (or higher), this built-in
          will return <code class="inline-code">&quot;INF&quot;</code>, <code class="inline-code">&quot;-INF&quot;</code> and
          <code class="inline-code">&quot;NaN&quot;</code> for positive/negative infinity and IEEE
          floating point Not-a-Number, respectively. These are the XML Schema
          compatible representations of these special values. (Earlier it has
          returned what <code class="inline-code">java.text.DecimalFormat</code> did with US
          locale, none of which is understood by any (common) computer
          language.)</p>

          <p>Note that this built-in <a href="ref_builtins_boolean.html#ref_builtin_c_boolean">also works on
          booleans</a>.</p>
        
          



<h2 class="content-header header-section2" id="ref_builtin_is_infinite">is_infinite</h2>


          

          

            <div class="callout note">
    <strong class="callout-label">Note:</strong>

            <p>This built-in exists since FreeMarker 2.3.20.</p>
            </div>


          <p>Tells if a number is floating point infinite (according to
          IEEE 754). For example, <code class="inline-code">someNumber?is_infinite</code>
          evaluates to <code class="inline-code">true</code> or <code class="inline-code">false</code>
          depending on if the value of <code class="inline-code">someNumber</code> is
          infinite or not. Of course, if the underlying number is not of
          floating point type, this will always return
          <code class="inline-code">false</code>.</p>
        
          



<h2 class="content-header header-section2" id="ref_builtin_is_nan">is_nan</h2>


          

          

            <div class="callout note">
    <strong class="callout-label">Note:</strong>

            <p>This built-in exists since FreeMarker 2.3.20.</p>
            </div>


          <p>Tells if a number is floating point NaN (according to IEEE
          754). For example, <code class="inline-code">someNumber?is_nan</code> evaluates to
          <code class="inline-code">true</code> or <code class="inline-code">false</code> depending on if
          the value of <code class="inline-code">someNumber</code> is NaN or not. Of course,
          if the underlying number is not of floating point type, this will
          always return <code class="inline-code">false</code>.</p>
        
          



<h2 class="content-header header-section2" id="ref_builtin_lower_abc">lower_abc</h2>


          

          

          

            <div class="callout note">
    <strong class="callout-label">Note:</strong>

            <p>This built-in exists since FreeMarker 2.3.22.</p>
            </div>


          <p>Converts <code class="inline-code">1</code>, <code class="inline-code">2</code>,
          <code class="inline-code">3</code>, etc., to the string <code class="inline-code">&quot;a&quot;</code>,
          <code class="inline-code">&quot;b&quot;</code>, <code class="inline-code">&quot;c&quot;</code>, etc. When reaching
          <code class="inline-code">&quot;z&quot;</code>, it continues like <code class="inline-code">&quot;aa&quot;</code>,
          <code class="inline-code">&quot;ab&quot;</code>, etc. This is the same logic that you can
          see in column labels in spreadsheet applications (like Excel or
          Calc). The lowest allowed number is <code class="inline-code">1</code>. There&#39;s no
          upper limit. If the number is <code class="inline-code">0</code> or less or it
          isn&#39;t an integer number then the template processing will be aborted
          with error.</p>

          <p>Example:</p>

          

<div class="code-wrapper"><pre class="code-block code-template">&lt;#list 1..30 as n&gt;${n?lower_abc} &lt;/#list&gt;</pre></div>

          <p>Prints:</p>

          

<div class="code-wrapper"><pre class="code-block code-output">a b c d e f g h i j k l m n o p q r s t u v w x y z aa ab ac ad </pre></div>

          <p>See also: <a href="#ref_builtin_upper_abc"><code>upper_abc</code></a></p>
        
          



<h2 class="content-header header-section2" id="ref_builtin_rounding">round, floor, ceiling</h2>


          

          

          

          

            <div class="callout note">
    <strong class="callout-label">Note:</strong>

            <p>The rounding built-ins exist since FreeMarker 2.3.13.</p>
            </div>


          <p>Converts a number to a whole number using the specified
          rounding rule:</p>

          <ul>
            <li>
              <p><code class="inline-code">round</code>: Rounds to the nearest whole
              number. If the number ends with .5, then it rounds upwards
              (i.e., towards positive infinity)</p>
            </li>

            <li>
              <p><code class="inline-code">floor</code>: Rounds the number downwards
              (i.e., towards neagative infinity)</p>
            </li>

            <li>
              <p><code class="inline-code">ceiling</code>: Rounds the number upwards
              (i.e., towards positive infinity)</p>
            </li>
          </ul>

          <p>Example:</p>

          

<div class="code-wrapper"><pre class="code-block code-template">&lt;#assign testlist=[
  0, 1, -1, 0.5, 1.5, -0.5,
  -1.5, 0.25, -0.25, 1.75, -1.75]&gt;
&lt;#list testlist as result&gt;
    ${result} ?floor=${result?floor} ?ceiling=${result?ceiling} ?round=${result?round}
&lt;/#list&gt;</pre></div>

          <p>Prints:</p>

          

<div class="code-wrapper"><pre class="code-block code-output">    0 ?floor=0 ?ceiling=0 ?round=0            
    1 ?floor=1 ?ceiling=1 ?round=1        
    -1 ?floor=-1 ?ceiling=-1 ?round=-1      
    0.5 ?floor=0 ?ceiling=1 ?round=1      
    1.5 ?floor=1 ?ceiling=2 ?round=2      
    -0.5 ?floor=-1 ?ceiling=0 ?round=0     
    -1.5 ?floor=-2 ?ceiling=-1 ?round=-1    
    0.25 ?floor=0 ?ceiling=1 ?round=0     
    -0.25 ?floor=-1 ?ceiling=0 ?round=0    
    1.75 ?floor=1 ?ceiling=2 ?round=2     
    -1.75 ?floor=-2 ?ceiling=-1 ?round=-2</pre></div>

          <p>These built-ins may be useful in pagination operations and
          like. If you just want to <em>display</em> numbers in
          rounded form, then you should rather use the <a href="#ref_builtin_string_for_number"><code>string</code>
          built-in</a> or the <a href="ref_directive_setting.html#ref.setting.number_format"><code>number_format</code>
          setting</a>.</p>
        
          



<h2 class="content-header header-section2" id="ref_builtin_string_for_number">string (when used with a numerical value)</h2>


          

          

          

          

          <p>Converts a number to a string. It uses the default format that
          the programmer has specified via the
          <code class="inline-code">number_format</code> and the <code class="inline-code">locale</code>
          settings. You can also specify a number format explicitly with this
          built-in, as it will be shown later.</p>

          <p>There are four predefined number formats:
          <code class="inline-code">computer</code>, <code class="inline-code">currency</code>,
          <code class="inline-code">number</code>, and <code class="inline-code">percent</code>. The exact
          meaning of these is locale (nationality) specific, and is controlled
          by the Java platform installation, rather than by FreeMarker, except
          for <code class="inline-code">computer</code>, which uses the same formatting as
          <a href="#ref_builtin_c">the <code>c</code>
          built-in</a>. You can use these predefined formats like
          this:</p>

          

<div class="code-wrapper"><pre class="code-block code-template">&lt;#assign x=42&gt;
${x}
${x?string}  &lt;#-- the same as ${x} --&gt;
${x?string.number}
${x?string.currency}
${x?string.percent}
${x?string.computer}</pre></div>

          <p>If your locale is US English, this will print:</p>

          

<div class="code-wrapper"><pre class="code-block code-output">42
42
42
$42.00
4,200%
42</pre></div>

          <p>The output of first three expressions is identical because the
          first two expressions use the default format, which is &quot;number&quot;
          here. You can change this default using a setting:</p>

          

<div class="code-wrapper"><pre class="code-block code-template">&lt;#setting number_format=&quot;currency&quot;&gt;
&lt;#assign x=42&gt;
${x}
${x?string}  &lt;#-- the same as ${x} --&gt;
${x?string.number}
${x?string.currency}
${x?string.percent}</pre></div>

          <p>Will now output:</p>

          

<div class="code-wrapper"><pre class="code-block code-output">$42.00
$42.00
42
$42.00
4,200%</pre></div>

          <p>since the default number format was set to &quot;currency&quot;.</p>

          <p>Beside the three predefined formats, you can use arbitrary
          number format patterns written in <a href="http://java.sun.com/j2se/1.4/docs/api/java/text/DecimalFormat.html">Java
          decimal number format syntax</a>:</p>

          

<div class="code-wrapper"><pre class="code-block code-template">&lt;#assign x = 1.234&gt;
${x?string[&quot;0&quot;]}
${x?string[&quot;0.#&quot;]}
${x?string[&quot;0.##&quot;]}
${x?string[&quot;0.###&quot;]}
${x?string[&quot;0.####&quot;]}

${1?string[&quot;000.00&quot;]}
${12.1?string[&quot;000.00&quot;]}
${123.456?string[&quot;000.00&quot;]}

${1.2?string[&quot;0&quot;]}
${1.8?string[&quot;0&quot;]}
${1.5?string[&quot;0&quot;]} &lt;-- 1.5, rounded towards even neighbor
${2.5?string[&quot;0&quot;]} &lt;-- 2.5, rounded towards even neighbor

${12345?string[&quot;0.##E0&quot;]}</pre></div>

          <p>outputs this:</p>

          

<div class="code-wrapper"><pre class="code-block code-output">1
1.2
1.23
1.234
1.234

001.00
012.10
123.46

1
2
2 &lt;-- 1.5, rounded towards even neighbor
2 &lt;-- 2.5, rounded towards even neighbor

1.23E4</pre></div>

          <p>Note that as in FreeMarker <code class="inline-code">foo.bar</code> is
          equivalent with <code class="inline-code">foo[&quot;bar&quot;]</code>, you could also write
          <code class="inline-code">x?string.currency</code> as
          <code class="inline-code">x?string[&quot;currency&quot;]</code>, but of course that wouldn&#39;t
          be practical. But in the above examples we have to use the square
          bracket syntax, because the characters involved (numbers, dot,
          <code class="inline-code">#</code>) aren&#39;t allowed syntactically after the dot
          operator.</p>

          <p>For historical reasons, you could also write things like
          <code class="inline-code">x?string(&quot;0.#&quot;)</code>, which does exactly the same as
          <code class="inline-code">x?string[&quot;0.#&quot;]</code>.</p>

          <p>Following the financial and statistics practice, the rounding
          goes according the so called half-even rule, which means rounding
          towards the nearest ``neighbor&#39;&#39;, unless both neighbors are
          equidistant, in which case, it rounds towards the even neighbor.
          This was visible in the above example if you look at the rounding of
          1.5 and of 2.5, as both were rounded to 2, since 2 is even, but 1
          and 3 are odds.</p>

          <p>As it was shown for the predefined formats earlier, the
          default formatting of the numbers can be set in the template:</p>

          

<div class="code-wrapper"><pre class="code-block code-template">&lt;#setting number_format=&quot;0.##&quot;&gt;
${1.234}</pre></div>

          <p>outputs this:</p>

          

<div class="code-wrapper"><pre class="code-block code-output">1.23</pre></div>

          <p>Note that as number formatting is locale sensitive, the locale
          setting also plays role in the formatting:</p>

          

<div class="code-wrapper"><pre class="code-block code-template">&lt;#setting number_format=&quot;,##0.00&quot;&gt;
&lt;#setting locale=&quot;en_US&quot;&gt;
US people write:     ${12345678}
&lt;#setting locale=&quot;hu&quot;&gt;
German people write: ${12345678}</pre></div>

          <p>outputs this:</p>

          

<div class="code-wrapper"><pre class="code-block code-output">US people write:     12,345,678.00
German people write: 12.345.678,00</pre></div>
        
          



<h2 class="content-header header-section2" id="ref_builtin_upper_abc">upper_abc</h2>


          

          

          

            <div class="callout note">
    <strong class="callout-label">Note:</strong>

            <p>This built-in exists since FreeMarker 2.3.22.</p>
            </div>


          <p>Same as <a href="#ref_builtin_lower_abc"><code>lower_abc</code></a>,
          but converts to upper case letters, like <code class="inline-code">&quot;A&quot;</code>,
          <code class="inline-code">&quot;B&quot;</code>, <code class="inline-code">&quot;C&quot;</code>, …,
          <code class="inline-code">&quot;AA&quot;</code>, <code class="inline-code">&quot;AB&quot;</code>, etc.</p>
        <div class="bottom-pagers-wrapper"><div class="pagers bottom"><a class="paging-arrow previous" href="ref_builtins_string.html"><span>Previous</span></a><a class="paging-arrow next" href="ref_builtins_date.html"><span>Next</span></a></div></div></div></div>      </div>
    </div>
<div class="site-footer"><div class="site-width"><div class="footer-top"><div class="col-left sitemap"><div class="column"><h3 class="column-header">Overview</h3><ul><li><a href="http://freemarker.org/index.html">What is FreeMarker?</a></li><li><a href="http://freemarker.org/freemarkerdownload.html">Download</a></li><li><a href="app_versions.html">Version history</a></li><li><a href="http://freemarker.org/history.html">About us</a></li><li><a href="app_license.html">License</a></li></ul></div><div class="column"><h3 class="column-header">Handy stuff</h3><ul><li><a href="http://freemarker-online.kenshoo.com/">Try template online</a></li><li><a href="dgui_template_exp.html#exp_cheatsheet">Expressions cheatsheet</a></li><li><a href="ref_directive_alphaidx.html">#directives</a></li><li><a href="ref_builtins_alphaidx.html">?built_ins</a></li><li><a href="ref_specvar.html">.special_vars</a></li></ul></div><div class="column"><h3 class="column-header">Community</h3><ul><li><a href="https://github.com/freemarker/freemarker">FreeMarker on Github</a></li><li><a href="https://twitter.com/freemarker">Follow us on Twitter</a></li><li><a href="https://sourceforge.net/p/freemarker/bugs/new/">Report a bug</a></li><li><a href="http://stackoverflow.com/questions/ask?tags=freemarker">Ask a question</a></li><li><a href="http://freemarker.org/mailing-lists.html">Mailing lists</a></li></ul></div></div><div class="col-right"><ul class="social-icons"><li><a class="github" href="https://github.com/freemarker/freemarker">Github</a></li><li><a class="twitter" href="https://twitter.com/freemarker">Twitter</a></li><li><a class="stack-overflow" href="http://stackoverflow.com/questions/ask?tags=freemarker">Stack Overflow</a></li></ul><a class="xxe" href="http://www.xmlmind.com/xmleditor/" rel="nofollow" title="Edited with XMLMind XML Editor"><span>Edited with XMLMind XML Editor</span></a></div></div><div class="footer-bottom"><p><span class="generated-for-product">Generated for: Freemarker 2.3.23</span><span class="last-updated"> Last generated:
<time itemprop="dateModified" datetime="2015-07-05T14:47:00Z" title="Sunday, July 5, 2015 2:47:00 PM GMT">2015-07-05 14:47:00 GMT</time></span></p> <p class="copyright">
© <span itemprop="copyrightYear">1999</span>–2015
<a itemtype="http://schema.org/Person" itemprop="copyrightHolder" href="http://freemarker.org">The FreeMarker Project</a>. All rights reserved. </p>
</div></div></div></body>
</html>
