<!doctype html>
<html lang="en" class="page-type-section">
<head prefix="og: http://ogp.me/ns#">
<meta charset="utf-8">
<title>Settings - FreeMarker Manual</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="format-detection" content="telephone=no">
<meta property="og:site_name" content="FreeMarker Manual">
<meta property="og:title" content="Settings">
<meta property="og:locale" content="en_US">
<meta property="og:url" content="http://freemarker.org/docs/pgui_config_settings.html">
<link rel="canoical" href="http://freemarker.org/docs/pgui_config_settings.html">
<link rel="icon" href="favicon.png" type="image/png">
<link rel="stylesheet" type="text/css" href="docgen-resources/docgen.min.css">
</head>
<body itemscope itemtype="http://schema.org/Article">
  <!--[if lte IE 9]>
  <div style="background-color: #C00; color: #fff; padding: 12px 24px;">Please use a modern browser to view this website.</div>
  <![endif]--><div class="header-top-bg"><div class="site-width header-top"><a class="logo" href="http://freemarker.org" role="banner">            <img src="logo.png" alt="FreeMarker">
</a><ul class="tabs"><li><a href="http://freemarker.org/">Home</a></li><li class="current"><a href="index.html">Manual</a></li><li><a class="external" href="api/index.html">Java API</a></li></ul><ul class="secondary-tabs"><li><a class="tab icon-heart" href="http://freemarker.org/contribute.html" title="Contribute"><span>Contribute</span></a></li><li><a class="tab icon-bug" href="https://sourceforge.net/p/freemarker/bugs/new/" title="Report a Bug"><span>Report a Bug</span></a></li><li><a class="tab icon-download" href="http://freemarker.org/freemarkerdownload.html" title="Download"><span>Download</span></a></li></ul></div></div><div class="header-bottom-bg"><div class="site-width search-row"><a href="toc.html" class="navigationHeader">Manual</a><div class="navigationHeader"></div></div><div class="site-width breadcrumb-row"><ul class="breadcrumb"><li class="step-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a class="label" itemprop="url" href="toc.html"><span itemprop="title">FreeMarker Manual</span></a></li><li class="step-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a class="label" itemprop="url" href="pgui.html"><span itemprop="title">Programmer&#39;s Guide</span></a></li><li class="step-2" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a class="label" itemprop="url" href="pgui_config.html"><span itemprop="title">The Configuration</span></a></li><li class="step-3" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a class="label" itemprop="url" href="pgui_config_settings.html"><span itemprop="title">Settings</span></a></li></ul><div class="bookmarks" title="Bookmarks"><span class="sr-only">Bookmarks:</span><ul class="bookmark-list"><li><a href="alphaidx.html">Alpha. index</a></li><li><a href="gloss.html">Glossary</a></li><li><a href="dgui_template_exp.html#exp_cheatsheet">Expressions</a></li><li><a href="ref_builtins_alphaidx.html">?builtins</a></li><li><a href="ref_directive_alphaidx.html">#directives</a></li><li><a href="ref_specvar.html">.spec_vars</a></li><li><a href="app_faq.html">FAQ</a></li></ul></div></div></div>    <div class="main-content site-width">
      <div class="content-wrapper">
  <div id="table-of-contents-wrapper" class="col-left">
      <script>var breadcrumb = ["FreeMarker Manual","Programmer\'s Guide","The Configuration","Settings"];</script>
      <script src="toc.js"></script>
      <script src="docgen-resources/main.min.js"></script>
  </div>
<div class="col-right"><div class="page-content"><div class="page-title"><div class="pagers top"><a class="paging-arrow previous" href="pgui_config_sharedvariables.html"><span>Previous</span></a><a class="paging-arrow next" href="pgui_config_templateloading.html"><span>Next</span></a></div><div class="title-wrapper">
<h1 class="content-header header-section1" id="pgui_config_settings" itemprop="name">Settings</h1>
</div></div><p><strong>Settings</strong> are named values that
        influence the behavior of FreeMarker. Examples of settings are:
        <code class="inline-code">locale</code>, <code class="inline-code">number_format</code>,
        <code class="inline-code">default_encoding</code>,
        <code class="inline-code">template_exception_handler</code>. The full list of
        settings can be found in the <a href="http://freemarker.org/docs/api/freemarker/template/Configuration.html#setSetting-java.lang.String-java.lang.String-">Java
        API documentation of
        <code>Configuration.setSetting(...)</code></a>.</p><p>Settings stored in <code class="inline-code">Configuration</code> instance can
        be overridden in a <code class="inline-code">Template</code> instance. For example
        you set <code class="inline-code">&quot;en_US&quot;</code> for the <code class="inline-code">locale</code>
        setting in the configuration, then the <code class="inline-code">locale</code> in
        all templates that use this configuration will be
        <code class="inline-code">&quot;en_US&quot;</code>, except in templates where the locale was
        explicitly specified differently (see <a href="ref_directive_include.html#ref_directive_include_localized">localization</a>). Thus,
        values in a <code class="inline-code">Configuration</code> serve as defaults that
        can be overridden in a per template manner. The value comes from
        <code class="inline-code">Configuration</code> instance or
        <code class="inline-code">Template</code> instance can be further overridden for a
        single <code class="inline-code">Template.process</code> call. For each such call a
        <code class="inline-code">freemarker.core.Environment</code> object is created
        internally that holds the runtime environment of the template
        processing, including the setting values that were overridden on that
        level. The values stored there can even be changed during the template
        processing, so a template can set settings itself, like switching
        <code class="inline-code">locale</code> at the middle of the output.</p><p>This can be imagined as 3 layers
        (<code class="inline-code">Configuration</code>, <code class="inline-code">Template</code>,
        <code class="inline-code">Environment</code>) of settings, where the topmost layer
        that contains the value for a certain setting provides the effective
        value of that setting. For example (settings A to F are just imaginary
        settings for this example):</p>  <div class="table-responsive">
    <table class="table">

          

          

          <thead>
            <tr>
              <th align="left"></th>


              <th align="center">Setting A</th>


              <th align="center">Setting B</th>


              <th align="center">Setting C</th>


              <th align="center">Setting D</th>


              <th align="center">Setting E</th>


              <th align="center">Setting F</th>

            </tr>

          </thead>


          <tbody>
            <tr>
              <td align="left">Layer 3: <code class="inline-code">Environment</code></td>


              <td align="center">1</td>


              <td align="center">-</td>


              <td align="center">-</td>


              <td align="center">1</td>


              <td align="center">-</td>


              <td align="center">-</td>

            </tr>


            <tr>
              <td align="left">Layer 2: <code class="inline-code">Template</code></td>


              <td align="center">2</td>


              <td align="center">2</td>


              <td align="center">-</td>


              <td align="center">-</td>


              <td align="center">2</td>


              <td align="center">-</td>

            </tr>


            <tr>
              <td align="left">Layer 1: <code class="inline-code">Configuration</code></td>


              <td align="center">3</td>


              <td align="center">3</td>


              <td align="center">3</td>


              <td align="center">3</td>


              <td align="center">-</td>


              <td align="center">-</td>

            </tr>

          </tbody>

            </table>
  </div>
<p>The effective value of settings will be: A = 1, B = 2, C = 3, D
        = 1, E = 2. The F setting is probably <code class="inline-code">null</code>, or it
        throws exception when you try to get it.</p><p>Let&#39;s see exactly how to set settings:</p><ul>
          <li>
            <p><code class="inline-code">Configuration</code> layer: In principle you set
            the settings with the setter methods of the
            <code class="inline-code">Configuration</code> object, fore example:</p>

            

<div class="code-wrapper"><pre class="code-block code-unspecified">Configuration myCfg = new Configuration(Configuration.VERSION_2_3_23);
myCfg.setTemplateExceptionHandler(TemplateExceptionHandler.RETHROW_HANDLER);
myCfg.setDefaultEncoding(&quot;UTF-8&quot;);</pre></div>

            <p>You do it before you start to actually use the
            <code class="inline-code">Configuration</code> object (typically, when you
            initialize the application); you should treat the object as
            read-only after that.</p>

            <p>In practice, in most Web application frameworks you have to
            specify the settings in a framework-specific configuration file
            that require specifying setting as <code class="inline-code">String</code>
            name-value pairs (like in a <code class="inline-code">.properties</code> file).
            In that case the authors of the frameworks most probably use the
            <code class="inline-code">setSetting(String name, String value)</code> method of
            <code class="inline-code">Configuration</code>; see available setting names and
            the format of the values in the <a href="http://freemarker.org/docs/api/freemarker/template/Configuration.html#setSetting-java.lang.String-java.lang.String-">API
            doc of <code>setSetting</code></a>. Example for Spring
            Framework:</p>

            

<div class="code-wrapper"><pre class="code-block code-unspecified">&lt;bean id=&quot;freemarkerConfig&quot;
    class=&quot;org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer&quot;&gt;
  &lt;property name=&quot;freemarkerSettings&quot;&gt;
    &lt;props&gt;
      &lt;prop key=&quot;incompatible_improvements&quot;&gt;2.3.23&lt;/prop&gt;
      &lt;prop key=&quot;template_exception_handler&quot;&gt;rethrow&lt;/prop&gt;
      &lt;prop key=&quot;default_encoding&quot;&gt;UTF-8&lt;/prop&gt;
    &lt;/props&gt;
  &lt;/property&gt;
&lt;/bean&gt;</pre></div>

            <p>Note that this kind of configuring
            (<code class="inline-code">String</code> key-value pairs) is unfortunately
            limited compared to directly using the API of
            <code class="inline-code">Configuration</code>.</p>
          </li>

          <li>
            <p><code class="inline-code">Template</code> layer: The
            <code class="inline-code">locale</code> setting of the template is set by
            <code class="inline-code">Configuration.getTemplate(...)</code> to the requested
            locale. Otherwise you shouldn&#39;t set settings here, unless you
            manage the <code class="inline-code">Template</code> objects instead of a
            <code class="inline-code">freemarker.cache.TemplateCache</code>, in which case
            you should set the setting before the <code class="inline-code">Template</code>
            object is first used, and then treat the
            <code class="inline-code">Template</code> object as read-only.</p>
          </li>

          <li>
            <p><code class="inline-code">Environment </code>layer: There are two ways
            doing it:</p>

            <ul>
              <li>
                <p>With Java API: Use the setter methods of the
                <code class="inline-code">Environment</code> object. Certainly you want to
                do that just before the processing of the template is started,
                and then you run into the problem that when you call
                <code class="inline-code">myTemplate.process(...)</code> it creates the
                <code class="inline-code">Environment</code> object internally and the
                immediately processes the template, so you had no chance. The
                solution is that this two steps can be separated like
                this:</p>

                

<div class="code-wrapper"><pre class="code-block code-unspecified">Environment env = myTemplate.createProcessingEnvironment(root, out);
env.setLocale(java.util.Locale.ITALY);
env.setNumberFormat(&quot;0.####&quot;);
env.process();  // process the template</pre></div>
              </li>

              <li>
                <p>Directly in the Template (considered as bad style,
                usually): Use the <a href="ref_directive_setting.html#ref.directive.setting"><code>setting</code>
                directive</a>, for example:</p>

                

<div class="code-wrapper"><pre class="code-block code-template">&lt;#setting locale=&quot;it_IT&quot;&gt;
&lt;#setting number_format=&quot;0.####&quot;&gt;</pre></div>
              </li>
            </ul>

            <p>There are no restriction regarding when can you change the
            settings in this layer.</p>
          </li>
        </ul><p>To see the list of supported settings and their meaning, please
        read the following parts of the FreeMarker Java API
        documentation:</p><ul>
          <li>
            <p>Setter methods of
            <code class="inline-code">freemarker.core.Configurable</code> for the settings
            that are in all three layers</p>
          </li>

          <li>
            <p>Setter methods of
            <code class="inline-code">freemarker.template.Configuration</code> for the
            settings that are available only in the
            <code class="inline-code">Configuration</code> layer</p>
          </li>

          <li>
            <p><code class="inline-code">freemarker.core.Configurable.setSetting(String,
            String)</code> for settings that are available in all three
            layers and are writable with <code class="inline-code">String</code> key-value
            pairs.</p>
          </li>

          <li>
            <p><code class="inline-code">freemarker.template.Configuration.setSetting(String,
            String)</code> for settings that are available only in the
            <code class="inline-code">Configuration</code> layer and are writable with
            <code class="inline-code">String</code> key-value pairs.</p>
          </li>
        </ul><div class="bottom-pagers-wrapper"><div class="pagers bottom"><a class="paging-arrow previous" href="pgui_config_sharedvariables.html"><span>Previous</span></a><a class="paging-arrow next" href="pgui_config_templateloading.html"><span>Next</span></a></div></div></div></div>      </div>
    </div>
<div class="site-footer"><div class="site-width"><div class="footer-top"><div class="col-left sitemap"><div class="column"><h3 class="column-header">Overview</h3><ul><li><a href="http://freemarker.org/index.html">What is FreeMarker?</a></li><li><a href="http://freemarker.org/freemarkerdownload.html">Download</a></li><li><a href="app_versions.html">Version history</a></li><li><a href="http://freemarker.org/history.html">About us</a></li><li><a href="app_license.html">License</a></li></ul></div><div class="column"><h3 class="column-header">Handy stuff</h3><ul><li><a href="http://freemarker-online.kenshoo.com/">Try template online</a></li><li><a href="dgui_template_exp.html#exp_cheatsheet">Expressions cheatsheet</a></li><li><a href="ref_directive_alphaidx.html">#directives</a></li><li><a href="ref_builtins_alphaidx.html">?built_ins</a></li><li><a href="ref_specvar.html">.special_vars</a></li></ul></div><div class="column"><h3 class="column-header">Community</h3><ul><li><a href="https://github.com/freemarker/freemarker">FreeMarker on Github</a></li><li><a href="https://twitter.com/freemarker">Follow us on Twitter</a></li><li><a href="https://sourceforge.net/p/freemarker/bugs/new/">Report a bug</a></li><li><a href="http://stackoverflow.com/questions/ask?tags=freemarker">Ask a question</a></li><li><a href="http://freemarker.org/mailing-lists.html">Mailing lists</a></li></ul></div></div><div class="col-right"><ul class="social-icons"><li><a class="github" href="https://github.com/freemarker/freemarker">Github</a></li><li><a class="twitter" href="https://twitter.com/freemarker">Twitter</a></li><li><a class="stack-overflow" href="http://stackoverflow.com/questions/ask?tags=freemarker">Stack Overflow</a></li></ul><a class="xxe" href="http://www.xmlmind.com/xmleditor/" rel="nofollow" title="Edited with XMLMind XML Editor"><span>Edited with XMLMind XML Editor</span></a></div></div><div class="footer-bottom"><p><span class="generated-for-product">Generated for: Freemarker 2.3.23</span><span class="last-updated"> Last generated:
<time itemprop="dateModified" datetime="2015-07-05T14:47:00Z" title="Sunday, July 5, 2015 2:47:00 PM GMT">2015-07-05 14:47:00 GMT</time></span></p> <p class="copyright">
© <span itemprop="copyrightYear">1999</span>–2015
<a itemtype="http://schema.org/Person" itemprop="copyrightHolder" href="http://freemarker.org">The FreeMarker Project</a>. All rights reserved. </p>
</div></div></div></body>
</html>
